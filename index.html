<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>PDUFA Desk â€” RCKT & DNLI Focus</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;600;700&family=Bebas+Neue&display=swap" rel="stylesheet"/>
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

  <style>
    :root {
      --bg:        #050810;
      --bg1:       #080c18;
      --surface:   rgba(255,255,255,.035);
      --surface2:  rgba(255,255,255,.055);
      --border:    rgba(255,255,255,.07);
      --border2:   rgba(255,255,255,.13);

      /* RCKT accent â€“ electric violet */
      --rckt:      #7c3aed;
      --rckt2:     #a78bfa;
      --rcktGlow:  rgba(124,58,237,.28);
      --rcktSoft:  rgba(124,58,237,.12);

      /* DNLI accent â€“ amber-teal */
      --dnli:      #0d9488;
      --dnli2:     #5eead4;
      --dnliGlow:  rgba(13,148,136,.28);
      --dnliSoft:  rgba(13,148,136,.12);

      /* NUVL accent â€“ sky */
      --nuvl:      #0284c7;
      --nuvl2:     #7dd3fc;

      /* System */
      --green:     #22c55e;
      --amber:     #f59e0b;
      --red:       #ef4444;
      --text:      #e2e8f0;
      --muted:     #64748b;
      --soft:      #94a3b8;

      --mono:   'JetBrains Mono', monospace;
      --sans:   'Space Grotesk', sans-serif;
      --display:'Bebas Neue', sans-serif;

      --r:  14px;
      --r2: 20px;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--sans);
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Ambient background blobs */
    body::before {
      content: '';
      position: fixed; inset: 0;
      background:
        radial-gradient(ellipse 900px 500px at -10% 5%,  rgba(124,58,237,.18), transparent 60%),
        radial-gradient(ellipse 800px 400px at 110% 10%, rgba(13,148,136,.16), transparent 60%),
        radial-gradient(ellipse 600px 400px at 50% 90%,  rgba(2,132,199,.10), transparent 60%);
      pointer-events: none;
      z-index: 0;
    }

    .wrap { position: relative; z-index: 1; max-width: 1400px; margin: 0 auto; padding: 0 16px 40px; }

    /* â”€â”€â”€ TOPBAR â”€â”€â”€ */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 0 12px;
      gap: 12px;
      flex-wrap: wrap;
      border-bottom: 1px solid var(--border);
    }
    .topbar-left { display: flex; align-items: center; gap: 14px; }
    .brand-mark {
      font-family: var(--display);
      font-size: 28px;
      letter-spacing: .06em;
      background: linear-gradient(135deg, #a78bfa, #7c3aed, #5eead4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1;
    }
    .brand-sub { font-size: 11px; color: var(--muted); margin-top: 2px; font-family: var(--mono); letter-spacing: .1em; }
    .topbar-right { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
    .live-pill {
      display: flex; align-items: center; gap: 6px;
      padding: 5px 12px; border-radius: 999px;
      border: 1px solid var(--border2);
      background: var(--surface);
      font-size: 11px; color: var(--soft); font-family: var(--mono);
    }
    .live-dot { width: 7px; height: 7px; border-radius: 50%; background: var(--green); box-shadow: 0 0 8px var(--green); animation: blink 2s infinite; }
    @keyframes blink { 0%,100%{opacity:1} 50%{opacity:.3} }

    /* â”€â”€â”€ HERO CARDS (RCKT + DNLI) â”€â”€â”€ */
    .heroes {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      margin-top: 16px;
    }
    @media (max-width: 900px) { .heroes { grid-template-columns: 1fr; } }

    .hero-card {
      border-radius: var(--r2);
      border: 1px solid var(--border);
      background: var(--surface);
      backdrop-filter: blur(12px);
      overflow: hidden;
      position: relative;
    }
    .hero-card::before {
      content: '';
      position: absolute;
      top: -60px; right: -60px;
      width: 240px; height: 240px;
      border-radius: 50%;
      opacity: .18;
      pointer-events: none;
    }
    .hero-card.rckt::before { background: var(--rckt); }
    .hero-card.dnli::before { background: var(--dnli); }

    .hero-head {
      padding: 18px 20px 14px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }
    .hero-ticker-wrap { display: flex; align-items: center; gap: 10px; }
    .hero-ticker {
      font-family: var(--mono); font-weight: 700; font-size: 22px;
      letter-spacing: .08em; line-height: 1;
    }
    .rckt .hero-ticker { color: var(--rckt2); }
    .dnli .hero-ticker { color: var(--dnli2); }
    .hero-name { font-size: 13px; color: var(--soft); margin-top: 3px; }

    .badge-row { display: flex; gap: 6px; flex-wrap: wrap; }
    .badge {
      font-size: 10px; padding: 3px 9px; border-radius: 999px;
      font-family: var(--mono); letter-spacing: .1em; text-transform: uppercase; font-weight: 600;
      border: 1px solid var(--border2); background: var(--surface2); color: var(--soft);
    }
    .rckt .badge.accent { border-color: rgba(167,139,250,.5); background: rgba(124,58,237,.15); color: var(--rckt2); }
    .dnli .badge.accent { border-color: rgba(94,234,212,.5); background: rgba(13,148,136,.15); color: var(--dnli2); }
    .badge.score { background: rgba(34,197,94,.12); border-color: rgba(34,197,94,.4); color: #4ade80; }

    /* KPIs inside hero */
    .hero-kpis {
      padding: 14px 20px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1px;
      background: var(--border);
    }
    .kpi {
      background: var(--bg1);
      padding: 12px 14px;
    }
    .kpi:first-child { border-radius: 0 0 0 0; }
    .kpi .k { font-size: 9px; color: var(--muted); letter-spacing: .15em; text-transform: uppercase; font-family: var(--mono); margin-bottom: 6px; }
    .kpi .v { font-size: 20px; font-family: var(--mono); font-weight: 700; line-height: 1; }
    .rckt .kpi .v { color: var(--rckt2); }
    .dnli .kpi .v { color: var(--dnli2); }
    .kpi .sub { font-size: 10px; color: var(--muted); margin-top: 4px; }

    /* PDUFA countdown */
    .countdown-block {
      padding: 14px 20px;
      display: flex;
      align-items: center;
      gap: 14px;
      border-bottom: 1px solid var(--border);
      flex-wrap: wrap;
    }
    .countdown-label { font-size: 10px; color: var(--muted); text-transform: uppercase; letter-spacing: .12em; font-family: var(--mono); flex: 0 0 auto; }
    .countdown-digits {
      display: flex;
      gap: 6px;
      flex: 1 1 auto;
    }
    .cd-unit {
      text-align: center;
      min-width: 44px;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 6px 8px;
    }
    .cd-num { font-family: var(--mono); font-size: 20px; font-weight: 700; line-height: 1; }
    .rckt .cd-num { color: var(--rckt2); }
    .dnli .cd-num { color: var(--dnli2); }
    .cd-lbl { font-size: 9px; color: var(--muted); margin-top: 3px; letter-spacing: .1em; text-transform: uppercase; }
    .pdufa-date-text { font-size: 12px; color: var(--soft); font-family: var(--mono); white-space: nowrap; }

    /* Timeline bar */
    .timeline-block { padding: 14px 20px; border-bottom: 1px solid var(--border); }
    .timeline-label { font-size: 10px; color: var(--muted); letter-spacing: .12em; text-transform: uppercase; font-family: var(--mono); margin-bottom: 10px; }
    .timeline-bar { position: relative; height: 8px; background: var(--surface2); border-radius: 4px; overflow: visible; }
    .timeline-fill {
      height: 100%;
      border-radius: 4px;
      position: absolute; left: 0; top: 0;
      transition: width .6s ease;
    }
    .rckt .timeline-fill { background: linear-gradient(90deg, rgba(124,58,237,.4), var(--rckt2)); }
    .dnli .timeline-fill { background: linear-gradient(90deg, rgba(13,148,136,.4), var(--dnli2)); }
    .timeline-marker {
      position: absolute; top: -4px;
      width: 16px; height: 16px; border-radius: 50%;
      border: 2px solid var(--bg);
      transform: translateX(-50%);
      box-shadow: 0 0 10px currentColor;
    }
    .rckt .timeline-marker { background: var(--rckt2); color: var(--rckt2); }
    .dnli .timeline-marker { background: var(--dnli2); color: var(--dnli2); }
    .timeline-labels { display: flex; justify-content: space-between; margin-top: 8px; }
    .timeline-labels span { font-size: 9px; color: var(--muted); font-family: var(--mono); }

    /* Thesis */
    .thesis-block { padding: 14px 20px; }
    .thesis-title { font-size: 10px; color: var(--muted); letter-spacing: .12em; text-transform: uppercase; font-family: var(--mono); margin-bottom: 10px; }
    .thesis-points { display: flex; flex-direction: column; gap: 7px; }
    .thesis-pt { display: flex; gap: 9px; align-items: flex-start; font-size: 12px; color: var(--text); line-height: 1.45; }
    .thesis-dot { width: 6px; height: 6px; border-radius: 50%; flex: 0 0 auto; margin-top: 5px; }
    .rckt .thesis-dot { background: var(--rckt2); box-shadow: 0 0 6px var(--rckt); }
    .dnli .thesis-dot { background: var(--dnli2); box-shadow: 0 0 6px var(--dnli); }

    /* â”€â”€â”€ ENTRY/EXIT windows â”€â”€â”€ */
    .windows-section {
      margin-top: 14px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    @media (max-width: 900px) { .windows-section { grid-template-columns: 1fr; } }
    .window-card {
      border-radius: var(--r); border: 1px solid var(--border);
      background: var(--surface); backdrop-filter: blur(8px);
      padding: 16px 18px; overflow: hidden; position: relative;
    }
    .window-card.rckt { border-top: 2px solid var(--rckt); }
    .window-card.dnli { border-top: 2px solid var(--dnli); }
    .wc-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap; gap: 8px; }
    .wc-title { font-family: var(--mono); font-size: 11px; color: var(--soft); letter-spacing: .1em; text-transform: uppercase; }
    .wc-ticker { font-family: var(--mono); font-weight: 700; font-size: 13px; }
    .rckt .wc-ticker { color: var(--rckt2); }
    .dnli .wc-ticker { color: var(--dnli2); }
    .window-rows { display: flex; flex-direction: column; gap: 8px; }
    .window-row { display: flex; justify-content: space-between; align-items: center; gap: 8px; flex-wrap: wrap; }
    .wr-label { font-size: 10px; color: var(--muted); text-transform: uppercase; letter-spacing: .1em; font-family: var(--mono); }
    .wr-dates { font-size: 12px; font-family: var(--mono); color: var(--text); }
    .wr-pill {
      font-size: 10px; padding: 3px 9px; border-radius: 999px;
      font-weight: 600; font-family: var(--mono); white-space: nowrap;
    }
    .wr-pill.entry { background: rgba(34,197,94,.12); border: 1px solid rgba(34,197,94,.35); color: #4ade80; }
    .wr-pill.exit  { background: rgba(245,158,11,.12); border: 1px solid rgba(245,158,11,.35); color: #fcd34d; }
    .wr-pill.active { animation: pulseGlow .9s infinite alternate; }
    .rckt .wr-pill.active { box-shadow: 0 0 8px var(--rckt); }
    .dnli .wr-pill.active { box-shadow: 0 0 8px var(--dnli); }
    @keyframes pulseGlow { from{opacity:.75} to{opacity:1} }

    /* â”€â”€â”€ CHARTS â”€â”€â”€ */
    .charts-section { margin-top: 14px; }
    .charts-title {
      font-size: 10px; color: var(--muted); letter-spacing: .15em;
      text-transform: uppercase; font-family: var(--mono);
      padding: 10px 0 10px; border-bottom: 1px solid var(--border); margin-bottom: 12px;
    }
    .chart-row { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    @media (max-width: 900px) { .chart-row { grid-template-columns: 1fr; } }
    .chart-card {
      border-radius: var(--r); border: 1px solid var(--border);
      background: var(--surface); overflow: hidden;
    }
    .chart-card-head {
      padding: 12px 16px 10px;
      border-bottom: 1px solid var(--border);
      display: flex; justify-content: space-between; align-items: center; gap: 8px; flex-wrap: wrap;
    }
    .chart-card-title { font-family: var(--mono); font-size: 13px; font-weight: 700; }
    .rckt-c .chart-card-title { color: var(--rckt2); }
    .dnli-c .chart-card-title { color: var(--dnli2); }
    .chart-card-note { font-size: 10px; color: var(--muted); font-family: var(--mono); }
    .chart-container { height: 280px; }

    /* â”€â”€â”€ NEWS FEED â”€â”€â”€ */
    .news-section { margin-top: 14px; }
    .news-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    @media (max-width: 900px) { .news-grid { grid-template-columns: 1fr; } }
    .news-card {
      border-radius: var(--r); border: 1px solid var(--border);
      background: var(--surface); backdrop-filter: blur(8px);
      overflow: hidden;
    }
    .news-card.rckt { border-top: 2px solid var(--rckt); }
    .news-card.dnli { border-top: 2px solid var(--dnli); }
    .news-head {
      padding: 12px 16px 10px;
      border-bottom: 1px solid var(--border);
      display: flex; justify-content: space-between; align-items: center; gap: 8px;
    }
    .news-head-left { display: flex; align-items: center; gap: 10px; }
    .news-head-ticker { font-family: var(--mono); font-weight: 700; font-size: 13px; }
    .rckt .news-head-ticker, .rckt.news-card .news-head-ticker { color: var(--rckt2); }
    .dnli .news-head-ticker, .dnli.news-card .news-head-ticker { color: var(--dnli2); }
    .news-status { font-size: 10px; color: var(--muted); font-family: var(--mono); }
    .news-refresh { padding: 5px 10px; border-radius: 999px; border: 1px solid var(--border2); background: var(--surface2); color: var(--soft); font-size: 10px; cursor: pointer; font-family: var(--mono); transition: border-color .15s; }
    .news-refresh:hover { border-color: var(--border2); color: var(--text); }
    .news-body { padding: 12px 16px; display: flex; flex-direction: column; gap: 10px; min-height: 120px; }
    .news-item { display: flex; gap: 10px; align-items: flex-start; }
    .news-dot-wrap { padding-top: 4px; }
    .news-dot { width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; }
    .rckt .news-dot, .rckt.news-card .news-dot { background: var(--rckt2); box-shadow: 0 0 6px var(--rckt); }
    .dnli .news-dot, .dnli.news-card .news-dot { background: var(--dnli2); box-shadow: 0 0 6px var(--dnli); }
    .news-item-body { flex: 1; }
    .news-item-title a { font-size: 12px; color: var(--text); text-decoration: none; line-height: 1.4; display: block; }
    .news-item-title a:hover { color: #fff; }
    .news-item-meta { font-size: 10px; color: var(--muted); margin-top: 3px; font-family: var(--mono); }
    .news-empty { font-size: 12px; color: var(--muted); padding: 8px 0; }

    /* â”€â”€â”€ WATCHLIST (compact below) â”€â”€â”€ */
    .watchlist-section { margin-top: 24px; }
    .section-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 10px 0 12px; border-bottom: 1px solid var(--border);
      gap: 10px; flex-wrap: wrap; margin-bottom: 12px;
    }
    .section-title { font-family: var(--display); font-size: 22px; letter-spacing: .06em; color: var(--text); }
    .section-sub { font-size: 11px; color: var(--muted); font-family: var(--mono); margin-top: 2px; }
    .filter-bar { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
    .search-wrap {
      display: flex; align-items: center; gap: 8px;
      padding: 8px 14px; border-radius: 999px;
      border: 1px solid var(--border2); background: var(--surface2);
      flex: 1 1 220px;
    }
    .search-wrap input { border: none; outline: none; background: transparent; color: var(--text); font-size: 12px; font-family: var(--sans); width: 100%; }
    .search-wrap input::placeholder { color: var(--muted); }
    .filter-sel {
      padding: 8px 12px; border-radius: 999px; border: 1px solid var(--border2);
      background: var(--surface2); color: var(--soft); font-size: 11px; font-family: var(--sans);
      outline: none; min-width: 130px;
    }

    /* Chips */
    .chip-row { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 12px; }
    .chip {
      padding: 6px 12px; border-radius: 999px; border: 1px solid var(--border2);
      background: var(--surface2); color: var(--muted); font-size: 11px; font-family: var(--mono);
      cursor: pointer; letter-spacing: .08em; transition: all .15s;
      white-space: nowrap;
    }
    .chip:hover { color: var(--text); border-color: rgba(255,255,255,.2); }
    .chip.active { border-color: rgba(167,139,250,.5); background: rgba(124,58,237,.15); color: var(--rckt2); }
    .chip[data-chip="dnli-focus"].active { border-color: rgba(94,234,212,.5); background: rgba(13,148,136,.15); color: var(--dnli2); }

    /* Table */
    .wl-table { width: 100%; border-collapse: collapse; }
    .wl-table th {
      text-align: left; padding: 8px 12px; font-size: 9px; color: var(--muted);
      letter-spacing: .14em; text-transform: uppercase; font-family: var(--mono); font-weight: 600;
      border-bottom: 1px solid var(--border); white-space: nowrap;
    }
    .wl-table td { padding: 11px 12px; border-bottom: 1px solid var(--border); vertical-align: top; }
    .wl-table tr:last-child td { border-bottom: none; }
    .wl-table tr { cursor: pointer; transition: background .12s; }
    .wl-table tr:hover td { background: var(--surface); }
    .td-company { font-size: 13px; font-weight: 600; display: flex; flex-direction: column; gap: 3px; }
    .td-ticker { font-family: var(--mono); font-size: 11px; letter-spacing: .1em; }
    .td-drug { font-size: 11px; color: var(--soft); }
    .td-indication { font-size: 11px; color: var(--muted); max-width: 200px; line-height: 1.35; }
    .td-date { font-family: var(--mono); font-size: 11px; white-space: nowrap; }
    .td-score { text-align: center; }
    .score-badge {
      display: inline-block; width: 26px; height: 26px; border-radius: 50%; line-height: 26px;
      text-align: center; font-size: 12px; font-weight: 700; font-family: var(--mono);
    }
    .s5 { background: rgba(34,197,94,.2); color: #4ade80; border: 1px solid rgba(34,197,94,.4); }
    .s4 { background: rgba(245,158,11,.15); color: #fcd34d; border: 1px solid rgba(245,158,11,.35); }
    .s3 { background: rgba(125,211,252,.1); color: #7dd3fc; border: 1px solid rgba(125,211,252,.3); }
    .s2 { background: var(--surface2); color: var(--muted); border: 1px solid var(--border); }
    .s1 { background: var(--surface); color: var(--muted); border: 1px solid var(--border); }
    .td-window { font-size: 10px; font-family: var(--mono); color: var(--soft); line-height: 1.55; }
    .td-tags { display: flex; flex-direction: column; gap: 4px; }
    .micro-badge {
      display: inline-block; font-size: 9px; padding: 2px 7px; border-radius: 999px;
      font-family: var(--mono); letter-spacing: .08em; border: 1px solid var(--border);
      background: var(--surface2); color: var(--muted); white-space: nowrap;
    }
    .micro-badge.orphan { border-color: rgba(125,211,252,.3); color: #7dd3fc; background: rgba(125,211,252,.08); }
    .micro-badge.untrade { border-color: rgba(239,68,68,.3); color: #fca5a5; background: rgba(239,68,68,.08); }

    /* Empty state */
    .empty-state { padding: 32px; text-align: center; color: var(--muted); font-size: 13px; border: 1px dashed var(--border); border-radius: var(--r); margin-top: 12px; }

    /* â”€â”€â”€ RESPONSIVE HIDING â”€â”€â”€ */
    @media (max-width: 700px) {
      .hide-mobile { display: none !important; }
      .wl-table td, .wl-table th { padding: 9px 8px; }
    }

    /* â”€â”€â”€ FOOTER â”€â”€â”€ */
    .foot {
      margin-top: 32px;
      padding: 16px 0;
      border-top: 1px solid var(--border);
      text-align: right;
      font-size: 10px;
      color: var(--muted);
      font-family: var(--mono);
    }

    /* â”€â”€â”€ Scrollbar styling â”€â”€â”€ */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: var(--bg); }
    ::-webkit-scrollbar-thumb { background: var(--surface2); border-radius: 3px; }
  </style>
</head>
<body>
<div class="wrap">

  <!-- TOP BAR -->
  <div class="topbar">
    <div class="topbar-left">
      <div>
        <div class="brand-mark">PDUFA DESK</div>
        <div class="brand-sub">RCKT â€¢ DNLI â€¢ NUVL FOCUS â€” 2026</div>
      </div>
    </div>
    <div class="topbar-right">
      <div class="live-pill"><div class="live-dot"></div><span id="todayLabel">â€”</span></div>
    </div>
  </div>

  <!-- â•â•â•â•â•â• HERO CARDS â•â•â•â•â•â• -->
  <div class="heroes">

    <!-- RCKT -->
    <div class="hero-card rckt">
      <div class="hero-head">
        <div>
          <div class="hero-ticker-wrap">
            <div class="hero-ticker">RCKT</div>
          </div>
          <div class="hero-name">Rocket Pharmaceuticals</div>
        </div>
        <div class="badge-row">
          <span class="badge accent">Gene Therapy</span>
          <span class="badge accent">Orphan</span>
          <span class="badge score">Score 5</span>
        </div>
      </div>

      <div class="hero-kpis">
        <div class="kpi">
          <div class="k">Drug</div>
          <div class="v" style="font-size:13px;line-height:1.3">KRESLADIâ„¢</div>
          <div class="sub">marnetegragene autotemcel</div>
        </div>
        <div class="kpi">
          <div class="k">Indication</div>
          <div class="v" style="font-size:13px;line-height:1.3">LAD-I</div>
          <div class="sub">Ultra-rare immune disorder</div>
        </div>
        <div class="kpi">
          <div class="k">Filing Type</div>
          <div class="v" style="font-size:13px;line-height:1.3">BLA</div>
          <div class="sub">Resubmission â€¢ Priority</div>
        </div>
      </div>

      <div class="countdown-block">
        <div class="countdown-label">PDUFA<br>Countdown</div>
        <div class="countdown-digits" id="rckt-cd"></div>
        <div class="pdufa-date-text">Mar 28, 2026</div>
      </div>

      <div class="timeline-block">
        <div class="timeline-label">Review Progress</div>
        <div class="timeline-bar">
          <div class="timeline-fill" id="rckt-fill" style="width:0%"></div>
          <div class="timeline-marker" id="rckt-marker" style="left:0%"></div>
        </div>
        <div class="timeline-labels">
          <span>BLA Accept Oct 14 '25</span>
          <span>Today</span>
          <span>PDUFA Mar 28 '26</span>
        </div>
      </div>

      <div class="thesis-block">
        <div class="thesis-title">Thesis Points</div>
        <div class="thesis-points">
          <div class="thesis-pt"><div class="thesis-dot"></div>100% overall survival at 12m in Phase 1/2 â€” all endpoints met, zero treatment-related SAEs.</div>
          <div class="thesis-pt"><div class="thesis-dot"></div>Resubmission after 2024 CRL addressed CMC-only concerns; no efficacy/safety issues raised.</div>
          <div class="thesis-pt"><div class="thesis-dot"></div>Rare Pediatric Disease PRV eligible â€” potential $100â€“150M windfall on approval.</div>
          <div class="thesis-pt"><div class="thesis-dot"></div>Small-cap ex-gene-therapy binary: high event beta, classic run-up setup.</div>
        </div>
      </div>
    </div>

    <!-- DNLI -->
    <div class="hero-card dnli">
      <div class="hero-head">
        <div>
          <div class="hero-ticker-wrap">
            <div class="hero-ticker">DNLI</div>
          </div>
          <div class="hero-name">Denali Therapeutics</div>
        </div>
        <div class="badge-row">
          <span class="badge accent">Brain-Penetrant ERT</span>
          <span class="badge accent">Orphan</span>
          <span class="badge score">Score 5</span>
        </div>
      </div>

      <div class="hero-kpis">
        <div class="kpi">
          <div class="k">Drug</div>
          <div class="v" style="font-size:13px;line-height:1.3">Tividenofusp</div>
          <div class="sub">DNL310 / ETV:IDS</div>
        </div>
        <div class="kpi">
          <div class="k">Indication</div>
          <div class="v" style="font-size:13px;line-height:1.3">MPS II</div>
          <div class="sub">Hunter syndrome</div>
        </div>
        <div class="kpi">
          <div class="k">Filing Type</div>
          <div class="v" style="font-size:13px;line-height:1.3">BLA</div>
          <div class="sub">Accelerated â€¢ Priority</div>
        </div>
      </div>

      <div class="countdown-block">
        <div class="countdown-label">PDUFA<br>Countdown</div>
        <div class="countdown-digits" id="dnli-cd"></div>
        <div class="pdufa-date-text">Apr 5, 2026</div>
      </div>

      <div class="timeline-block">
        <div class="timeline-label">Review Progress</div>
        <div class="timeline-bar">
          <div class="timeline-fill" id="dnli-fill" style="width:0%"></div>
          <div class="timeline-marker" id="dnli-marker" style="left:0%"></div>
        </div>
        <div class="timeline-labels">
          <span>BLA Accept Jul 7 '25</span>
          <span>Today</span>
          <span>PDUFA Apr 5 '26</span>
        </div>
      </div>

      <div class="thesis-block">
        <div class="thesis-title">Thesis Points</div>
        <div class="thesis-points">
          <div class="thesis-pt"><div class="thesis-dot"></div>First BBB-crossing ERT for Hunter syndrome â€” first major advance in nearly 20 years.</div>
          <div class="thesis-pt"><div class="thesis-dot"></div>NEJM publication (Jan 1 '26) + Breakthrough Therapy Designation = maximum FDA goodwill.</div>
          <div class="thesis-pt"><div class="thesis-dot"></div>Extension was CMC/PK-only â€” FDA explicitly clarified no efficacy or safety concerns.</div>
          <div class="thesis-pt"><div class="thesis-dot"></div>Mid-cap with TransportVehicle platform optionality; strong institutional interest.</div>
        </div>
      </div>
    </div>

  </div><!-- /heroes -->

  <!-- â•â•â•â•â•â• ENTRY / EXIT WINDOWS â•â•â•â•â•â• -->
  <div class="windows-section">
    <div class="window-card rckt">
      <div class="wc-head">
        <div class="wc-title">Trading Windows</div>
        <div class="wc-ticker">RCKT</div>
      </div>
      <div class="window-rows" id="rckt-windows"></div>
    </div>
    <div class="window-card dnli">
      <div class="wc-head">
        <div class="wc-title">Trading Windows</div>
        <div class="wc-ticker">DNLI</div>
      </div>
      <div class="window-rows" id="dnli-windows"></div>
    </div>
  </div>

  <!-- â•â•â•â•â•â• LIVE CHARTS â•â•â•â•â•â• -->
  <div class="charts-section">
    <div class="charts-title">LIVE CHARTS â€” TRADINGVIEW</div>
    <div class="chart-row">
      <div class="chart-card rckt-c">
        <div class="chart-card-head">
          <div class="chart-card-title">RCKT</div>
          <div class="chart-card-note">PDUFA Mar 28 '26</div>
        </div>
        <div class="chart-container" id="tv_rckt"></div>
      </div>
      <div class="chart-card dnli-c">
        <div class="chart-card-head">
          <div class="chart-card-title">DNLI</div>
          <div class="chart-card-note">PDUFA Apr 5 '26</div>
        </div>
        <div class="chart-container" id="tv_dnli"></div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â• NEWS FEEDS â•â•â•â•â•â• -->
  <div class="news-section">
    <div class="charts-title">LIVE NEWS FEEDS</div>
    <div class="news-grid">
      <div class="news-card rckt">
        <div class="news-head">
          <div class="news-head-left">
            <div class="news-head-ticker" style="color:var(--rckt2)">RCKT</div>
            <div class="news-status" id="rckt-status">Loadingâ€¦</div>
          </div>
          <button class="news-refresh" onclick="fetchNews('rckt')">â†» Refresh</button>
        </div>
        <div class="news-body" id="rckt-news"></div>
      </div>
      <div class="news-card dnli">
        <div class="news-head">
          <div class="news-head-left">
            <div class="news-head-ticker" style="color:var(--dnli2)">DNLI</div>
            <div class="news-status" id="dnli-status">Loadingâ€¦</div>
          </div>
          <button class="news-refresh" onclick="fetchNews('dnli')">â†» Refresh</button>
        </div>
        <div class="news-body" id="dnli-news"></div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â• FULL WATCHLIST â•â•â•â•â•â• -->
  <div class="watchlist-section" id="watchlist-section">
    <div class="section-header">
      <div>
        <div class="section-title">FULL WATCHLIST 2026</div>
        <div class="section-sub">All upcoming PDUFA events â€” auto-removes past dates</div>
      </div>
      <div class="filter-bar">
        <div class="search-wrap">
          <span style="color:var(--muted);font-size:13px">âŒ•</span>
          <input id="searchBox" type="text" placeholder="Search ticker, drug, indicationâ€¦"/>
        </div>
        <select class="filter-sel" id="scoreFilter">
          <option value="0">Score: Any</option>
          <option value="4">Score 4+</option>
          <option value="5">Score 5 only</option>
        </select>
        <select class="filter-sel" id="sortSelect">
          <option value="pdufa_date:asc">Date â†‘</option>
          <option value="pdufa_date:desc">Date â†“</option>
          <option value="runup_priority_score_1to5:desc">Score â†“</option>
        </select>
      </div>
    </div>

    <div class="chip-row">
      <div class="chip active" data-chip="rckt-focus">ðŸš€ RCKT Focus</div>
      <div class="chip" data-chip="dnli-focus">ðŸ§¬ DNLI Focus</div>
      <div class="chip" data-chip="score5">Score 5</div>
      <div class="chip" data-chip="score4">Score 4+</div>
      <div class="chip" data-chip="orphan">Orphan Only</div>
      <div class="chip" data-chip="reset">Reset</div>
    </div>

    <div id="watchlist-container">
      <table class="wl-table" id="wl-table">
        <thead>
          <tr>
            <th>Company / Drug</th>
            <th class="hide-mobile">Indication</th>
            <th>PDUFA</th>
            <th>Score</th>
            <th class="hide-mobile">Entry Window</th>
            <th class="hide-mobile">Exit Window</th>
            <th class="hide-mobile">Tags</th>
          </tr>
        </thead>
        <tbody id="wl-tbody"></tbody>
      </table>
      <div id="wl-empty" class="empty-state" style="display:none">No matches â€” try a broader search.</div>
    </div>
  </div>

  <div class="foot">Copyright G.V / S.N 2026 â€” Research prototype. Not financial advice.</div>
</div><!-- /wrap -->

<script>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   DATA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const CSV_HEADER = ["pdufa_date","drug","brand_name","company","ticker","indication","orphan_drug","therapy_type","market_cap_bucket","listing_region","liquidity_flag","runup_priority_score_1to5","suggested_entry_window_days","suggested_exit_window_days","notes"];
const INLINE_CSV = `
pdufa_date,drug,brand_name,company,ticker,indication,orphan_drug,therapy_type,market_cap_bucket,listing_region,liquidity_flag,runup_priority_score_1to5,suggested_entry_window_days,suggested_exit_window_days,notes
2026-02-08,"clemidsogene lanparvovec",RGX-121,REGENXBIO,RGNX,"Mucopolysaccharidosis II (MPS II)",Yes,"AAV gene therapy","Small-Mid",US,Listed,5,"T-150 to T-90","T-20 to T-7","High-impact CNS gene therapy; classic binary catalyst"
2026-02-28,pegvaliase,Palynziq,BioMarin,BMRN,"Phenylketonuria (PKU)",Yes,"Enzyme substitution (PEGylated)","Mid-Large",US,Listed,3,"T-90 to T-45","T-20 to T-10","sBLA/label refinement; BioMarin is moderately volatile"
2026-02-28,navepegritide,"TransCon CNP",Ascendis Pharma,ASND,Achondroplasia (children),Yes,"Long-acting peptide hormone (CNP)",Mid,"US/EU",Listed,4,"T-120 to T-60","T-20 to T-10","Priority-review growth-disorder asset; attractive single-franchise story"
2026-03-20,setmelanotide,Imcivree,"Rhythm Pharmaceuticals",RYTM,"Acquired hypothalamic obesity",Yes,"Peptide agonist (MC4R)","Small-Mid",US,Listed,4,"T-120 to T-60","T-20 to T-10","Label expansion in rare obesity; sentiment-sensitive"
2026-03-28,"marnetegragene autotemcel",KRESLADI,"Rocket Pharmaceuticals",RCKT,"LAD-I (ultra-rare immunodeficiency)",Yes,"Ex vivo gene therapy","Small-Mid",US,Listed,5,"T-150 to T-90","T-20 to T-7","Ultra-rare gene therapy; high event trader focus; resubmission after CMC-only CRL; 100% OS in Ph1/2"
2026-03-29,"Ga-68 edotreotide",LNTH-2501,Lantheus,LNTH,"SSTR+ neuroendocrine tumor PET imaging",No,"Diagnostic radiopharmaceutical",Mid,US,Listed,3,"T-90 to T-45","T-20 to T-10","Imaging agent complementing NET portfolio"
2026-04-05,"tividenofusp alfa",DNL310,"Denali Therapeutics",DNLI,"Hunter syndrome (MPS II)",Yes,"Brain-penetrant enzyme replacement",Mid,US,Listed,5,"T-150 to T-90","T-20 to T-7","Priority-review CNS ERT; NEJM publication; Breakthrough Therapy; CMC-only extensionâ€”no efficacy/safety concerns"
2026-06-18,"nilotinib (505(b)(2))",XS003,"Xspray Pharma",XSPRAY.ST,"Chronic myeloid leukemia (CML)",No,"Small-molecule TKI reformulation",Small,"EU (Sweden)",Listed,4,"T-120 to T-60","T-20 to T-7","TKI reformulation; Swedish small-cap with clear event date"
2026-07-11,relacorilant,,Corcept Therapeutics,CORT,"Platinum-resistant ovarian cancer",Yes,"Cortisol receptor modulator",Mid,US,Listed,4,"T-120 to T-60","T-20 to T-7","Oncology indication; strong phase 3 data drove interest"
2026-07-26,"furosemide autoinjector (SCP-111)","FUROSCIX ReadyFlow","MannKind / scPharmaceuticals",MNKD,"Edema in CHF / CKD",No,"Device + small-molecule combo","Small-Mid",US,Listed,3,"T-90 to T-45","T-20 to T-10","sNDA for new autoinjector; device-formulation narrative"
2026-09-18,zidesamtinib,,Nuvalent,NUVL,"ROS1+ non-small cell lung cancer",Yes,"Small-molecule kinase inhibitor",Mid,US,Listed,5,"T-150 to T-90","T-20 to T-7","Targeted oncology with clean single-asset story; strong run-up candidate"
2026-10-10,tabelecleucel,Tab-cel,"Pierre Fabre / Atara license",ATRA,"EBV+ PTLD (post-transplant lymphoma)",Yes,"Allogeneic T-cell therapy",Small,"US/EU","Listed/Partnered",3,"T-120 to T-60","T-20 to T-10","BLA held by private partner; Atara still sentiment-linked"
`;

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PARSING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function parseCSV(text) {
  return text.trim().split(/\r?\n/).slice(1).map(line => {
    const cells = []; let cur = ""; let inQ = false;
    for (const c of line) {
      if (c === '"') inQ = !inQ;
      else if (c === ',' && !inQ) { cells.push(cur); cur = ""; }
      else cur += c;
    }
    cells.push(cur);
    const o = {};
    CSV_HEADER.forEach((k, i) => o[k] = (cells[i] || "").trim().replace(/^"|"$/g,""));
    return o;
  });
}

function startOfDay(d) { return new Date(d.getFullYear(), d.getMonth(), d.getDate()); }
function todayStart() { return startOfDay(new Date()); }
function isFutureOrToday(iso) { return new Date(iso + "T00:00:00") >= todayStart(); }

function parseWindow(str) {
  if (!str) return null;
  const m = str.match(/T-(\d+)\s*to\s*T-(\d+)/i);
  if (!m) return null;
  return { a: +m[1], b: +m[2] };
}

function windowDates(pdufaISO, str) {
  const w = parseWindow(str);
  if (!w) return null;
  const p = new Date(pdufaISO + "T00:00:00");
  const s = new Date(p); s.setDate(s.getDate() - w.a);
  const e = new Date(p); e.setDate(e.getDate() - w.b);
  // nudge weekends to Friday
  [s, e].forEach(d => { if (d.getDay()===6) d.setDate(d.getDate()-1); if (d.getDay()===0) d.setDate(d.getDate()-2); });
  return { start: s, end: e };
}

function fmt(d) { return d.toLocaleDateString(undefined, {month:"short",day:"2-digit",year:"numeric"}); }
function fmtShort(d) { return d.toLocaleDateString(undefined, {month:"short",day:"2-digit"}); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   COUNTDOWN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function buildCountdown(targetISO, elId) {
  const el = document.getElementById(elId);
  if (!el) return;
  function update() {
    const now = Date.now();
    const target = new Date(targetISO + "T00:00:00").getTime();
    const diff = Math.max(0, target - now);
    const d = Math.floor(diff / 86400000);
    const h = Math.floor((diff % 86400000) / 3600000);
    const m = Math.floor((diff % 3600000) / 60000);
    const s = Math.floor((diff % 60000) / 1000);
    el.innerHTML = [
      { n: d, l: "DAYS" }, { n: h, l: "HRS" }, { n: m, l: "MIN" }, { n: s, l: "SEC" }
    ].map(x => `<div class="cd-unit"><div class="cd-num">${String(x.n).padStart(2,"0")}</div><div class="cd-lbl">${x.l}</div></div>`).join('');
  }
  update();
  setInterval(update, 1000);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   REVIEW PROGRESS BAR
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function setProgress(startISO, pdufaISO, fillId, markerId) {
  const start = new Date(startISO + "T00:00:00").getTime();
  const end   = new Date(pdufaISO + "T00:00:00").getTime();
  const now   = Date.now();
  const pct   = Math.min(100, Math.max(0, ((now - start) / (end - start)) * 100)).toFixed(1);
  const fillEl = document.getElementById(fillId);
  const markEl = document.getElementById(markerId);
  if (fillEl) fillEl.style.width = pct + "%";
  if (markEl) markEl.style.left  = pct + "%";
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   WINDOWS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function renderWindows(row, elId) {
  const el = document.getElementById(elId);
  if (!el) return;
  const today = todayStart();
  const entry = windowDates(row.pdufa_date, row.suggested_entry_window_days);
  const exit  = windowDates(row.pdufa_date, row.suggested_exit_window_days);
  const pdufa = new Date(row.pdufa_date + "T00:00:00");

  function windowRow(label, range, kind) {
    if (!range) return "";
    const isActive = today >= range.start && today <= range.end;
    const upcoming = today < range.start && range.start <= new Date(today.getTime() + 30*86400000);
    const pill = isActive ? `<span class="wr-pill ${kind} active">ACTIVE</span>` :
                 upcoming ? `<span class="wr-pill ${kind}">UPCOMING</span>` : "";
    return `<div class="window-row">
      <div class="wr-label">${label}</div>
      <div class="wr-dates">${fmt(range.start)} â†’ ${fmt(range.end)}</div>
      ${pill}
    </div>`;
  }

  const daysTo = Math.max(0, Math.round((pdufa - today) / 86400000));
  el.innerHTML = `
    ${windowRow("Entry", entry, "entry")}
    ${windowRow("Exit",  exit,  "exit")}
    <div class="window-row" style="margin-top:6px">
      <div class="wr-label">PDUFA Date</div>
      <div class="wr-dates">${fmt(pdufa)}</div>
      <span class="wr-pill" style="background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.15);color:var(--soft)">${daysTo}d away</span>
    </div>
  `;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   NEWS (Google RSS via allorigins)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function timeAgo(d) {
  const s = Math.max(0, Math.floor((Date.now() - d) / 1000));
  if (s < 60) return "just now";
  if (s < 3600) return `${Math.floor(s/60)}m ago`;
  if (s < 86400) return `${Math.floor(s/3600)}h ago`;
  return `${Math.floor(s/86400)}d ago`;
}

async function fetchNews(ticker) {
  const queries = {
    rckt: "Rocket Pharmaceuticals RCKT KRESLADI FDA 2026",
    dnli: "Denali Therapeutics DNLI tividenofusp Hunter syndrome FDA 2026"
  };
  const statusEl = document.getElementById(`${ticker}-status`);
  const bodyEl   = document.getElementById(`${ticker}-news`);
  if (!statusEl || !bodyEl) return;
  statusEl.textContent = "Fetchingâ€¦";
  bodyEl.innerHTML = "";

  try {
    const rss = `https://news.google.com/rss/search?q=${encodeURIComponent(queries[ticker])}&hl=en-US&gl=US&ceid=US:en`;
    const res = await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(rss)}`, {cache:"no-store"});
    const xml = await res.text();
    const doc = new DOMParser().parseFromString(xml, "text/xml");
    const items = Array.from(doc.querySelectorAll("item")).slice(0,4).map(i => ({
      title: i.querySelector("title")?.textContent?.trim() || "â€”",
      link:  i.querySelector("link")?.textContent?.trim()  || "#",
      pubDate: new Date(i.querySelector("pubDate")?.textContent || ""),
    }));

    if (!items.length) throw new Error("empty");

    statusEl.textContent = `${timeAgo(items[0].pubDate.getTime())} â€” latest`;
    bodyEl.innerHTML = items.map(it => `
      <div class="news-item">
        <div class="news-dot-wrap"><div class="news-dot"></div></div>
        <div class="news-item-body">
          <div class="news-item-title"><a href="${it.link}" target="_blank" rel="noopener">${it.title}</a></div>
          <div class="news-item-meta">${isNaN(it.pubDate) ? "" : timeAgo(it.pubDate.getTime())}</div>
        </div>
      </div>`).join('');
  } catch {
    statusEl.textContent = "Unavailable";
    bodyEl.innerHTML = `<div class="news-empty">Feed unavailable â€” check connectivity or try refreshing.</div>`;
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   TRADINGVIEW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function initCharts() {
  if (typeof TradingView === "undefined") { setTimeout(initCharts, 500); return; }
  [
    { id: "tv_rckt", sym: "NASDAQ:RCKT" },
    { id: "tv_dnli", sym: "NASDAQ:DNLI" }
  ].forEach(({ id, sym }) => {
    new TradingView.widget({
      container_id: id, symbol: sym, interval: "D",
      timezone: "Etc/UTC", theme: "dark", style: "1", locale: "en",
      hide_top_toolbar: false, height: 280, width: "100%",
      toolbar_bg: "#080c18", withdateranges: true,
      allow_symbol_change: true
    });
  });
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   WATCHLIST TABLE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const CSV_HEADER_WL = CSV_HEADER;
let allRows = [];
const chipState = { score5:false, score4:false, orphan:false, rckt:true, dnli:false };

function isTradeable(r) {
  return !!(r.ticker && !r.liquidity_flag.toLowerCase().includes("unlisted"));
}

function sortRows(arr, val) {
  const [key, dir] = val.split(":");
  return [...arr].sort((a,b) => {
    let va = a[key] || "", vb = b[key] || "";
    if (key === "runup_priority_score_1to5") { va = +va; vb = +vb; }
    else if (key === "pdufa_date") { va = new Date(va); vb = new Date(vb); }
    else { va = va.toLowerCase(); vb = vb.toLowerCase(); }
    return dir === "desc" ? (va < vb ? 1 : va > vb ? -1 : 0) : (va < vb ? -1 : va > vb ? 1 : 0);
  });
}

function renderTable() {
  const tbody  = document.getElementById("wl-tbody");
  const empty  = document.getElementById("wl-empty");
  const search = (document.getElementById("searchBox").value || "").toLowerCase();
  const minSc  = +document.getElementById("scoreFilter").value;
  const sortV  = document.getElementById("sortSelect").value;

  let rows = allRows.filter(r => {
    if (!isFutureOrToday(r.pdufa_date)) return false;
    const blob = [r.company, r.ticker, r.indication, r.drug, r.notes, r.therapy_type, r.listing_region].join(" ").toLowerCase();
    if (search && !blob.includes(search)) return false;
    const sc = +r.runup_priority_score_1to5;
    if (sc < minSc) return false;
    if (chipState.score5 && sc !== 5) return false;
    if (chipState.score4 && sc < 4) return false;
    if (chipState.orphan && r.orphan_drug.toLowerCase() !== "yes") return false;
    if (chipState.rckt && r.ticker.toUpperCase() !== "RCKT") return false;
    if (chipState.dnli && r.ticker.toUpperCase() !== "DNLI") return false;
    return true;
  });

  rows = sortRows(rows, sortV);
  tbody.innerHTML = "";
  empty.style.display = rows.length ? "none" : "block";

  const scoreClass = s => s>=5?"s5":s>=4?"s4":s>=3?"s3":s>=2?"s2":"s1";

  for (const r of rows) {
    const sc = +r.runup_priority_score_1to5;
    const entry = windowDates(r.pdufa_date, r.suggested_entry_window_days);
    const exit  = windowDates(r.pdufa_date, r.suggested_exit_window_days);
    const orphan = r.orphan_drug.toLowerCase() === "yes";
    const tradeable = isTradeable(r);

    const entryStr = entry ? `${fmtShort(entry.start)} â†’ ${fmtShort(entry.end)}` : "â€”";
    const exitStr  = exit  ? `${fmtShort(exit.start)} â†’ ${fmtShort(exit.end)}`   : "â€”";

    const tickerColor = r.ticker === "RCKT" ? "color:var(--rckt2)" :
                        r.ticker === "DNLI" ? "color:var(--dnli2)" :
                        r.ticker === "NUVL" ? "color:var(--nuvl2)" : "color:var(--soft)";

    const tr = document.createElement("tr");
    tr.addEventListener("click", () => {
      const tv = `https://www.tradingview.com/symbols/${encodeURIComponent(r.ticker)}/`;
      if (r.ticker) window.open(tv, "_blank");
    });
    tr.innerHTML = `
      <td>
        <div class="td-company">
          <span style="display:flex;gap:8px;align-items:center">
            <span class="td-ticker" style="${tickerColor}">${r.ticker||"N/A"}</span>
            <span style="font-size:12px;color:var(--soft)">${r.company}</span>
          </span>
          <span class="td-drug">${r.drug}${r.brand_name?` Â· ${r.brand_name}`:""}</span>
        </div>
      </td>
      <td class="td-indication hide-mobile">${r.indication}</td>
      <td class="td-date">${fmt(new Date(r.pdufa_date+"T00:00:00"))}</td>
      <td class="td-score"><span class="score-badge ${scoreClass(sc)}">${sc}</span></td>
      <td class="td-window hide-mobile">${entryStr}</td>
      <td class="td-window hide-mobile">${exitStr}</td>
      <td class="td-tags hide-mobile">
        ${orphan ? `<span class="micro-badge orphan">Orphan</span>` : ""}
        ${!tradeable ? `<span class="micro-badge untrade">Unlisted</span>` : ""}
        <span class="micro-badge">${r.therapy_type.split("(")[0].trim()}</span>
      </td>
    `;
    tbody.appendChild(tr);
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   INIT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function init() {
  // Today label
  document.getElementById("todayLabel").textContent =
    new Date().toLocaleDateString(undefined, {weekday:"short",month:"short",day:"2-digit",year:"numeric"});

  // Parse data
  allRows = parseCSV(INLINE_CSV);

  // Hero data rows
  const rcktRow = allRows.find(r => r.ticker === "RCKT");
  const dnliRow = allRows.find(r => r.ticker === "DNLI");

  // Countdowns
  buildCountdown("2026-03-28", "rckt-cd");
  buildCountdown("2026-04-05", "dnli-cd");

  // Progress bars (BLA acceptance dates)
  setProgress("2025-10-14", "2026-03-28", "rckt-fill", "rckt-marker");
  setProgress("2025-07-07", "2026-04-05", "dnli-fill", "dnli-marker");

  // Trading windows
  if (rcktRow) renderWindows(rcktRow, "rckt-windows");
  if (dnliRow) renderWindows(dnliRow, "dnli-windows");

  // News
  fetchNews("rckt");
  fetchNews("dnli");
  setInterval(() => { fetchNews("rckt"); fetchNews("dnli"); }, 15*60*1000);

  // Charts
  setTimeout(initCharts, 500);

  // Watchlist
  renderTable();

  // Controls
  document.getElementById("searchBox").addEventListener("input", renderTable);
  document.getElementById("scoreFilter").addEventListener("change", renderTable);
  document.getElementById("sortSelect").addEventListener("change", renderTable);

  // Chips
  document.querySelectorAll(".chip").forEach(ch => {
    ch.addEventListener("click", () => {
      const key = ch.dataset.chip;
      if (key === "reset") {
        Object.keys(chipState).forEach(k => chipState[k] = false);
        document.querySelectorAll(".chip").forEach(c => c.classList.remove("active"));
        renderTable(); return;
      }
      // Mutex: rckt-focus and dnli-focus
      if (key === "rckt-focus") {
        chipState.rckt = !chipState.rckt;
        if (chipState.rckt) { chipState.dnli = false; document.querySelector('[data-chip="dnli-focus"]')?.classList.remove("active"); }
      } else if (key === "dnli-focus") {
        chipState.dnli = !chipState.dnli;
        if (chipState.dnli) { chipState.rckt = false; document.querySelector('[data-chip="rckt-focus"]')?.classList.remove("active"); }
      } else if (key === "score5") {
        chipState.score5 = !chipState.score5;
        if (chipState.score5) { chipState.score4 = false; document.querySelector('[data-chip="score4"]')?.classList.remove("active"); }
      } else if (key === "score4") {
        chipState.score4 = !chipState.score4;
        if (chipState.score4) { chipState.score5 = false; document.querySelector('[data-chip="score5"]')?.classList.remove("active"); }
      } else if (key === "orphan") {
        chipState.orphan = !chipState.orphan;
      }
      ch.classList.toggle("active");
      renderTable();
    });
  });
}

window.addEventListener("load", init);
</script>
</body>
</html>
