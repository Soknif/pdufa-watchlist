<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PDUFA 2026 Run-Up Watchlist</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #050816;
      --bg-elevated: #0b1020;
      --bg-card: #0f172a;
      --bg-card-soft: #111827;
      --border-subtle: #1f2937;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.15);
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --text-muted: #6b7280;
      --danger: #f97373;
      --warning: #facc15;
      --info: #38bdf8;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.7);
      --radius-xl: 18px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      color: var(--text-main);
      background:
        radial-gradient(circle at top, rgba(34, 197, 94, 0.17), transparent 55%),
        radial-gradient(circle at bottom, rgba(56, 189, 248, 0.1), transparent 55%),
        var(--bg);
      display: flex;
      justify-content: center;
      padding: 24px 12px;
    }

    .app-shell {
      width: 100%;
      max-width: 1240px;
      background: linear-gradient(135deg, #020617 0%, #020617 40%, #020617 100%);
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.18);
      box-shadow: var(--shadow-soft);
      padding: 18px 18px 22px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      backdrop-filter: blur(18px);
    }

    /* Header / top bar */
    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 6px 10px 4px;
    }

    .brand { display: flex; align-items: center; gap: 10px; }

    .brand-logo {
      width: 32px; height: 32px; border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #4ade80, #22c55e);
      display: flex; align-items: center; justify-content: center;
      color: #022c22; font-weight: 800; font-size: 16px;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);
    }

    .brand-text { display: flex; flex-direction: column; gap: 2px; }

    .brand-title {
      font-size: 14px; font-weight: 600; letter-spacing: 0.02em;
      display: flex; align-items: center; gap: 6px;
    }

    .brand-tagline { font-size: 11px; color: var(--text-soft); }

    .pill {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      background-color: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.6);
      padding: 2px 8px;
      border-radius: 999px;
      color: var(--text-soft);
      white-space: nowrap;
    }

    .top-right {
      display: flex; align-items: center; gap: 8px;
      font-size: 11px; color: var(--text-muted);
      white-space: nowrap;
    }

    .status-dot {
      width: 8px; height: 8px; border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #4ade80, #22c55e);
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.18);
    }

    .status-label { font-size: 11px; color: var(--text-soft); }

    /* Intro panel */
    .intro-panel {
      background:
        radial-gradient(circle at top left, rgba(34,197,94,0.12), transparent 55%),
        radial-gradient(circle at bottom right, rgba(56,189,248,0.14), transparent 50%),
        var(--bg-card);
      border-radius: var(--radius-xl);
      padding: 14px 16px 14px;
      border: 1px solid var(--border-subtle);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .intro-main {
      display: flex;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
    }

    .intro-copy { max-width: 660px; }

    .intro-title {
      font-size: 18px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .intro-highlight {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(34, 197, 94, 0.12);
      color: #bbf7d0;
      border: 1px solid rgba(34, 197, 94, 0.6);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      white-space: nowrap;
    }

    .intro-subtitle {
      margin-top: 4px;
      font-size: 12px;
      color: var(--text-soft);
      line-height: 1.5;
    }

    .intro-meta {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 11px;
      color: var(--text-soft);
      min-width: 190px;
    }

    .meta-row { display: flex; justify-content: space-between; gap: 8px; }

    .meta-label { color: var(--text-muted); }

    .meta-value { color: #e5e7eb; font-weight: 500; }

    .controls-row {
      margin-top: 6px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: space-between;
    }

    .primary-button {
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid rgba(34, 197, 94, 0.7);
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #022c22;
      font-size: 11px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 8px 22px rgba(34, 197, 94, 0.32);
      user-select: none;
    }

    .primary-button span { font-size: 14px; }

    .secondary-text { font-size: 11px; color: var(--text-soft); }

    /* Layout */
    .app-main {
      display: grid;
      grid-template-columns: minmax(0, 1.55fr) minmax(0, 1.1fr);
      gap: 14px;
      align-items: start;
    }

    @media (max-width: 1020px) {
      .app-main { grid-template-columns: minmax(0, 1fr); }
      .top-right { display: none; }
    }

    .card {
      background: var(--bg-card-soft);
      border-radius: var(--radius-xl);
      padding: 10px 12px 10px;
      border: 1px solid var(--border-subtle);
      box-shadow: 0 10px 28px rgba(15, 23, 42, 0.45);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 8px;
      margin-bottom: 8px;
    }

    .card-title {
      font-size: 13px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-title-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: var(--accent-soft);
      border: 1px solid var(--accent);
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.28);
      flex: 0 0 auto;
    }

    .card-subtitle {
      font-size: 11px;
      color: var(--text-soft);
      line-height: 1.4;
      margin-top: 2px;
    }

    /* Controls */
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 10px;
      align-items: center;
      font-size: 11px;
    }

    .controls label { display: flex; align-items: center; gap: 6px; }

    input[type="text"], select {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: #020617;
      color: var(--text-main);
      font-size: 11px;
      min-width: 155px;
      outline: none;
    }

    input[type="text"]::placeholder { color: #6b7280; }

    /* NEW: Table as full-width ‚Äúlist‚Äù (no horizontal scroll) */
    .table-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .row-card {
      background: linear-gradient(180deg, rgba(2,6,23,0.9), rgba(2,6,23,0.75));
      border: 1px solid rgba(31, 41, 55, 0.9);
      border-radius: 14px;
      padding: 10px 10px;
      transition: transform 0.08s ease, border-color 0.08s ease;
      cursor: pointer;
    }

    .row-card:hover {
      transform: translateY(-1px);
      border-color: rgba(56,189,248,0.35);
    }

    .row-top {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: space-between;
      align-items: baseline;
    }

    .row-left {
      display: flex;
      flex-direction: column;
      gap: 4px;
      min-width: 240px;
      flex: 1 1 360px;
    }

    .row-title {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      font-weight: 650;
      font-size: 12px;
      letter-spacing: 0.01em;
    }

    .row-title .ticker {
      color: #cbd5e1;
      font-weight: 700;
      letter-spacing: 0.08em;
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(15, 23, 42, 0.75);
    }

    .row-sub {
      color: var(--text-soft);
      font-size: 11px;
      line-height: 1.35;
    }

    .row-right {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: flex-end;
      flex: 1 1 280px;
    }

    .kv {
      display: flex;
      flex-direction: column;
      gap: 2px;
      padding: 6px 10px;
      border-radius: 12px;
      border: 1px solid rgba(55,65,81,0.8);
      background: rgba(2, 6, 23, 0.6);
      min-width: 140px;
    }

    .kv .k { font-size: 9px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.12em; }
    .kv .v { font-size: 11px; color: #e5e7eb; font-weight: 600; }

    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 10px;
      font-weight: 700;
      line-height: 1;
      white-space: nowrap;
    }

    .tag-orphan {
      background: rgba(56, 189, 248, 0.12);
      color: #7dd3fc;
      border: 1px solid rgba(56, 189, 248, 0.5);
    }

    .tag-high {
      background: rgba(34, 197, 94, 0.15);
      color: #bbf7d0;
      border: 1px solid rgba(34, 197, 94, 0.8);
    }

    .tag-medium {
      background: rgba(250, 204, 21, 0.14);
      color: #fde68a;
      border: 1px solid rgba(250, 204, 21, 0.8);
    }

    .tag-low {
      background: rgba(248, 113, 113, 0.16);
      color: #fecaca;
      border: 1px solid rgba(248, 113, 113, 0.9);
    }

    /* Cluster tags */
    .tag-cluster-4 {
      background: rgba(250, 204, 21, 0.14);
      color: #fde68a;
      border: 1px solid rgba(250, 204, 21, 0.8);
    }

    .tag-cluster-3 {
      background: rgba(56, 189, 248, 0.12);
      color: #7dd3fc;
      border: 1px solid rgba(56, 189, 248, 0.5);
    }

    .tag-untradeable {
      background: rgba(248, 113, 113, 0.16);
      color: #fecaca;
      border: 1px solid rgba(248, 113, 113, 0.9);
    }

    .row-bottom {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      justify-content: space-between;
    }

    .rationale {
      flex: 1 1 520px;
      font-size: 11px;
      color: #cbd5e1;
      line-height: 1.35;
      opacity: 0.95;
    }

    .links {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .link-btn {
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(15, 23, 42, 0.6);
      color: #e5e7eb;
      text-decoration: none;
      transition: transform 0.08s ease, border-color 0.08s ease;
      user-select: none;
    }

    .link-btn:hover {
      transform: translateY(-1px);
      border-color: rgba(34,197,94,0.45);
    }

    .empty-state {
      padding: 14px 12px;
      border-radius: 14px;
      border: 1px dashed rgba(148,163,184,0.35);
      color: var(--text-soft);
      font-size: 11px;
      background: rgba(2,6,23,0.4);
    }

    /* Charts card */
    .chart-grid { display: flex; flex-direction: column; gap: 10px; }

    .chart-card {
      background: radial-gradient(circle at top left, rgba(34,197,94,0.18), transparent 60%),
        #020617;
      border-radius: 12px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 8px 8px 8px;
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      margin-bottom: 6px;
      gap: 10px;
      flex-wrap: wrap;
    }

    .chart-header h3 {
      margin: 0;
      font-size: 11px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }

    .pill-small {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      padding: 1px 6px;
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-soft);
      white-space: nowrap;
    }

    .chart-note { font-size: 10px; color: var(--text-muted); }

    .chart-canvas { height: 260px; width: 100%; }

    /* RCKT Countdown & Phase Indicator */
    .rckt-countdown {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 14px;
      margin: 8px 0;
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.08), rgba(56, 189, 248, 0.08));
      border: 1px solid rgba(34, 197, 94, 0.3);
      border-radius: 12px;
      gap: 12px;
      flex-wrap: wrap;
    }

    .countdown-main { display: flex; align-items: baseline; gap: 8px; }

    .countdown-number {
      font-size: 32px;
      font-weight: 800;
      color: var(--accent);
      line-height: 1;
      font-variant-numeric: tabular-nums;
    }

    .countdown-label {
      font-size: 11px;
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .phase-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .phase-dot {
      width: 10px; height: 10px; border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.3);
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .phase-text {
      font-size: 11px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .phase-pre-entry { color: #9ca3af; }
    .phase-pre-entry .phase-dot { background: #9ca3af; box-shadow: 0 0 0 3px rgba(156, 163, 175, 0.3); }

    .phase-entry { color: #22c55e; }
    .phase-entry .phase-dot { background: #22c55e; box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.3); }

    .phase-hold { color: #38bdf8; }
    .phase-hold .phase-dot { background: #38bdf8; box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.3); }

    .phase-exit { color: #fb923c; }
    .phase-exit .phase-dot { background: #fb923c; box-shadow: 0 0 0 3px rgba(251, 146, 60, 0.3); }

    .phase-post { color: #f87171; }
    .phase-post .phase-dot { background: #f87171; box-shadow: 0 0 0 3px rgba(248, 113, 113, 0.3); }

    /* Timeline Progress Bar */
    .timeline-container { margin: 12px 0; padding: 0 4px; }

    .timeline-track {
      position: relative;
      height: 70px;
      background: linear-gradient(to bottom, #020617, #0f172a);
      border: 1px solid rgba(55, 65, 81, 0.6);
      border-radius: 12px;
      overflow: visible;
    }

    .timeline-segment {
      position: absolute;
      top: 0;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2px;
      border-right: 1px solid rgba(75, 85, 99, 0.4);
      text-align: center;
      padding: 0 6px;
    }

    .timeline-segment:last-of-type { border-right: none; }

    .entry-zone {
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.05));
    }

    .hold-zone {
      background: linear-gradient(135deg, rgba(56, 189, 248, 0.15), rgba(56, 189, 248, 0.05));
    }

    .exit-zone {
      background: linear-gradient(135deg, rgba(251, 146, 60, 0.2), rgba(251, 146, 60, 0.05));
    }

    .zone-label {
      font-size: 10px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #e5e7eb;
      white-space: nowrap;
    }

    .zone-dates { font-size: 9px; color: var(--text-muted); white-space: nowrap; }

    .timeline-marker {
      position: absolute;
      top: -8px;
      transform: translateX(-50%);
      z-index: 10;
    }

    .marker-line {
      width: 2px;
      height: 86px;
      background: linear-gradient(to bottom, #f87171, rgba(248, 113, 113, 0.3));
      margin: 0 auto;
    }

    .marker-label {
      position: absolute;
      top: -24px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 9px;
      font-weight: 800;
      color: #fecaca;
      white-space: nowrap;
      text-align: center;
      line-height: 1.2;
    }

    .timeline-position {
      position: absolute;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: 20;
      transition: left 0.5s ease;
    }

    .position-indicator {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .position-indicator span {
      font-size: 11px;
      font-weight: 900;
      color: #fbbf24;
      background: rgba(251, 191, 36, 0.15);
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(251, 191, 36, 0.6);
      box-shadow: 0 0 12px rgba(251, 191, 36, 0.4);
      white-space: nowrap;
    }

    /* Footer */
    .footer {
      margin-top: 4px;
      font-size: 10px;
      color: var(--text-muted);
      text-align: right;
      padding: 0 6px;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- Top bar -->
    <header class="top-bar">
      <div class="brand">
        <div class="brand-logo">P</div>
        <div class="brand-text">
          <div class="brand-title">
            PDUFA Run-Up Desk
            <span class="pill">ZONDA Research Internal Prototype</span>
          </div>
          <div class="brand-tagline">
            Dynamic pre-PDUFA entry/exit strategies ‚Ä¢ clustered risk view.
          </div>
        </div>
      </div>
      <div class="top-right">
        <span class="status-dot"></span>
        <span class="status-label">Live view ‚Ä¢ 2026 PDUFA events</span>
      </div>
    </header>

    <!-- Intro / summary panel -->
    <section class="intro-panel">
      <div class="intro-main">
        <div class="intro-copy">
          <div class="intro-title">
            2026 PDUFA Watchlist
            <span class="intro-highlight">Run-up + risk clusters</span>
          </div>
          <div class="intro-subtitle">
            This interface tracks a curated set of 2026 PDUFA decisions, with an emphasis on
            <strong>small/mid-cap, orphan and gene therapy names</strong> where pre-PDUFA run-up
            is historically most pronounced. We now also cluster score <strong>3‚Äì4</strong> names
            as <strong>higher-risk but investable</strong> candidates and show a concise rationale for the score.
          </div>
        </div>
        <div class="intro-meta">
          <div class="meta-row">
            <span class="meta-label">Universe</span>
            <span class="meta-value">2026 orphan/PDUFA list</span>
          </div>
          <div class="meta-row">
            <span class="meta-label">Strategy</span>
            <span class="meta-value">Enter T-150‚ÜíT-90, exit T-20‚ÜíT-7</span>
          </div>
          <div class="meta-row">
            <span class="meta-label">Core cases</span>
            <span class="meta-value">RCKT, NUVL</span>
          </div>
        </div>
      </div>
      <div class="controls-row">
        <button class="primary-button" id="scrollToCases">
          <span>‚ñ∂</span>
          Jump to case studies: RCKT & NUVL
        </button>
        <div class="secondary-text">
          Filters below adjust the watchlist only ‚Äî this is <strong>not</strong> advice, it‚Äôs an experiment framework.
        </div>
      </div>
    </section>

    <!-- Main layout: list + charts -->
    <main class="app-main">
      <!-- Left: Watchlist card -->
      <section class="card">
        <div class="card-header">
          <div>
            <div class="card-title">
              <span class="card-title-dot"></span>
              PDUFA 2026 watchlist (no-scroll layout)
            </div>
            <div class="card-subtitle">
              Each row is a ‚Äúresearch card‚Äù with score, cluster, entry/exit windows, and a brief ‚Äúwhy score?‚Äù rationale.
              Click a row to copy a summary line to clipboard.
            </div>
          </div>
        </div>

        <div class="controls">
          <label>
            <span>Search</span>
            <input id="searchBox" type="text" placeholder="Company, ticker, indication..." />
          </label>

          <label>
            <span>Min score</span>
            <select id="scoreFilter">
              <option value="0">Any</option>
              <option value="3">3+</option>
              <option value="4">4+</option>
              <option value="5">5 only</option>
            </select>
          </label>

          <label>
            <span>Orphan</span>
            <select id="orphanFilter">
              <option value="any">Any</option>
              <option value="yes">Only orphan</option>
              <option value="no">Non-orphan</option>
            </select>
          </label>

          <label>
            <span>Cluster</span>
            <select id="clusterFilter">
              <option value="any">Any</option>
              <option value="high-upside">Higher-risk / High-upside (Score 4)</option>
              <option value="speculative">Speculative / Watch (Score 3)</option>
              <option value="untradeable">Untradeable / Indirect</option>
            </select>
          </label>

          <label>
            <span>Sort</span>
            <select id="sortSelect">
              <option value="pdufa_date:asc">Date ‚Üë</option>
              <option value="pdufa_date:desc">Date ‚Üì</option>
              <option value="runup_priority_score_1to5:desc">Score ‚Üì</option>
              <option value="runup_priority_score_1to5:asc">Score ‚Üë</option>
              <option value="company:asc">Company A‚ÜíZ</option>
              <option value="company:desc">Company Z‚ÜíA</option>
            </select>
          </label>
        </div>

        <div id="watchlist" class="table-list"></div>
      </section>

      <!-- Right: Charts card -->
      <section class="card" id="caseStudies">
        <div class="card-header">
          <div>
            <div class="card-title">
              <span class="card-title-dot"></span>
              Live charts: core case studies
            </div>
            <div class="card-subtitle">
              Monitoring <strong>Rocket (RCKT)</strong> and <strong>Nuvalent (NUVL)</strong> through their pre-PDUFA windows.
            </div>
          </div>
        </div>

        <div class="chart-grid">
          <!-- RCKT -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>
                RCKT ‚Äì Rocket Pharmaceuticals
                <span class="pill-small">Score 5 ‚Ä¢ LAD-I gene therapy</span>
              </h3>
              <div class="chart-note">PDUFA: 28 March 2026</div>
            </div>

            <div class="rckt-countdown">
              <div class="countdown-main">
                <div class="countdown-number" id="rckt-days">--</div>
                <div class="countdown-label">days to PDUFA</div>
              </div>
              <div class="phase-indicator" id="rckt-phase">
                <span class="phase-dot"></span>
                <span class="phase-text">Calculating...</span>
              </div>
            </div>

            <div class="timeline-container">
              <div class="timeline-track">
                <div class="timeline-segment entry-zone" style="left: 0%; width: 25%;">
                  <span class="zone-label">Entry Window</span>
                  <span class="zone-dates">Dec 3 - Jan 2</span>
                </div>
                <div class="timeline-segment hold-zone" style="left: 25%; width: 50%;">
                  <span class="zone-label">Hold Period</span>
                </div>
                <div class="timeline-segment exit-zone" style="left: 75%; width: 20%;">
                  <span class="zone-label">Exit Window</span>
                  <span class="zone-dates">Feb 24 - Mar 21</span>
                </div>
                <div class="timeline-marker pdufa-marker" style="left: 95%;">
                  <div class="marker-line"></div>
                  <span class="marker-label">PDUFA<br/>Mar 28</span>
                </div>
                <div class="timeline-position" id="rckt-position">
                  <div class="position-indicator">
                    <span>üìç NOW</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="tradingview-widget-container">
              <div id="tradingview_rckt" class="chart-canvas"></div>
              <div class="chart-note" style="margin-top: 8px;">
                Buy/Sell:
                <a
                  href="https://www.avanza.se/aktier/om-aktien.html/814735/rocket-pharmaceuticals"
                  target="_blank"
                  rel="noopener noreferrer"
                  style="color:#86efac;"
                >
                  Open Rocket (RCKT) in Avanza
                </a>
              </div>
            </div>
          </div>

          <!-- NUVL -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>
                NUVL ‚Äì Nuvalent
                <span class="pill-small">Score 5 ‚Ä¢ ROS1+ NSCLC</span>
              </h3>
              <div class="chart-note">PDUFA: 18 September 2026 ‚Ä¢ Target: enter ‚âà T-90, exit ‚âà T-20</div>
            </div>
            <div class="tradingview-widget-container">
              <div id="tradingview_nuvl" class="chart-canvas"></div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      Built as an internal sandbox for observing pre-PDUFA price behaviour ‚Äî not investment advice.
    </footer>
  </div>

  <!-- TradingView library -->
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

  <script>
    const csvHeader = [
      "pdufa_date",
      "drug",
      "brand_name",
      "company",
      "ticker",
      "indication",
      "orphan_drug",
      "therapy_type",
      "market_cap_bucket",
      "listing_region",
      "liquidity_flag",
      "runup_priority_score_1to5",
      "suggested_entry_window_days",
      "suggested_exit_window_days",
      "notes"
    ];

    // Inline CSV data
    const inlineCSV = `
pdufa_date,drug,brand_name,company,ticker,indication,orphan_drug,therapy_type,market_cap_bucket,listing_region,liquidity_flag,runup_priority_score_1to5,suggested_entry_window_days,suggested_exit_window_days,notes
2026-01-13,sparsentan,FILSPARI,Travere Therapeutics,TVTX,"FSGS (kidney disease)",Yes,"Small-molecule (dual ETAR/AT1R inhibitor)",Small,US,Listed,4,"T-120 to T-60","T-20 to T-10","sNDA for FSGS; already approved for IgAN"
2026-01-13,imiglucerase,Cerezyme,Sanofi,SNY,"Gaucher disease type 3",Yes,"Enzyme replacement therapy",Large,"EU/US",Listed,1,"T-60 to T-30","T-30 to T-15","sBLA in a mega-cap; usually lower event-driven % moves"
2026-01-31,leniolisib,Joenja,Pharming Group,PHARM.AS,"Pediatric APDS (4‚Äì11 years)",Yes,"Small-molecule PI3KŒ¥ inhibitor","Small-Mid",EU,Listed,4,"T-120 to T-60","T-20 to T-10","sNDA, priority review; rare immunodeficiency"
2026-01-31,"epinephrine oral film",Anaphylm,Aquestive Therapeutics,AQST,"Anaphylaxis (allergic reactions)",No,"Small-molecule / oral film formulation",Small,US,Listed,4,"T-120 to T-60","T-20 to T-10","NDA for novel oral epinephrine film; retail/derisking interest"
2026-02-08,"clemidsogene lanparvovec",RGX-121,REGENXBIO,RGNX,"Mucopolysaccharidosis II (MPS II)",Yes,"AAV gene therapy","Small-Mid",US,Listed,5,"T-150 to T-90","T-20 to T-7","High-impact CNS gene therapy; classic binary catalyst"
2026-02-25,"decitabine+cedazuridine + venetoclax","Inqovi + Venclexta","Taiho Oncology / Otsuka",OTSKY,"Acute myeloid leukemia",Yes,"Oral chemo + BCL-2 inhibitor combo",Large,JP/US,Listed,2,"T-60 to T-30","T-30 to T-10","sNDA combo in large-cap ecosystem"
2026-02-28,pegvaliase,Palynziq,BioMarin,BMRN,"Phenylketonuria (PKU)",Yes,"Enzyme substitution (PEGylated)","Mid-Large",US,Listed,3,"T-90 to T-45","T-20 to T-10","sBLA/label refinement; BioMarin is moderately volatile"
2026-02-28,navepegritide,"TransCon CNP",Ascendis Pharma,ASND,Achondroplasia (children),Yes,"Long-acting peptide hormone (CNP)",Mid,"US/EU",Listed,4,"T-120 to T-60","T-20 to T-10","Priority-review growth-disorder asset; attractive single-franchise story"
2026-03-20,setmelanotide,Imcivree,"Rhythm Pharmaceuticals",RYTM,"Acquired hypothalamic obesity",Yes,"Peptide agonist (MC4R)","Small-Mid",US,Listed,4,"T-120 to T-60","T-20 to T-10","Label expansion in rare obesity; sentiment-sensitive"
2026-03-24,linerixibat,,GSK,GSK,"Cholestatic pruritus in PBC",Yes,"Small-molecule IBAT inhibitor",Large,"UK/US",Listed,2,"T-60 to T-30","T-30 to T-10","NDA in rare liver disease; large-cap, lower % swing expected"
2026-03-28,"marnetegragene autotemcel",KRESLADI,"Rocket Pharmaceuticals",RCKT,"LAD-I (ultra-rare immunodeficiency)",Yes,"Ex vivo gene therapy","Small-Mid",US,Listed,5,"T-150 to T-90","T-20 to T-7","Ultra-rare gene therapy; high ‚Äòevent trader‚Äô focus"
2026-03-29,"Ga-68 edotreotide",LNTH-2501,Lantheus,LNTH,"SSTR+ neuroendocrine tumor PET imaging",No,"Diagnostic radiopharmaceutical",Mid,US,Listed,3,"T-90 to T-45","T-20 to T-10","Imaging agent complementing NET portfolio"
2026-04-05,"tividenofusp alfa",DNL310,"Denali Therapeutics",DNLI,"Hunter syndrome (MPS II)",Yes,"Brain-penetrant enzyme replacement",Mid,US,Listed,5,"T-150 to T-90","T-20 to T-7","Priority-review CNS ERT; high-profile rare-disease catalyst"
2026-04-06,Orca-T,,Orca Bio,,"AML / ALL / MDS (allogeneic transplant)",Yes,"Cell therapy (engineered graft)",Private,US,Unlisted,3,,,"Private company; equity not directly tradeable"
2026-06-18,"nilotinib (505(b)(2))",XS003,"Xspray Pharma",XSPRAY.ST,"Chronic myeloid leukemia (CML)",No,"Small-molecule TKI reformulation",Small,"EU (Sweden)",Listed,4,"T-120 to T-60","T-20 to T-7","TKI reformulation; Swedish small-cap with clear event date"
2026-07-03,"manganese chloride tetrahydrate",Orviglance,"Ascelia Pharma",ACE.ST,"Liver MRI contrast in renal impairment",Yes,"Imaging contrast agent",Small,"EU (Sweden)",Listed,4,"T-120 to T-60","T-20 to T-7","Orphan contrast agent; binary for a small Nordic biotech"
2026-07-11,relacorilant,,Corcept Therapeutics,CORT,"Platinum-resistant ovarian cancer",Yes,"Cortisol receptor modulator",Mid,US,Listed,4,"T-120 to T-60","T-20 to T-7","Oncology indication; strong phase 3 data drove interest"
2026-07-26,"furosemide autoinjector (SCP-111)","FUROSCIX ReadyFlow","MannKind / scPharmaceuticals partnership",MNKD,"Edema in CHF / CKD",No,"Device + small-molecule combo","Small-Mid",US,Listed,3,"T-90 to T-45","T-20 to T-10","sNDA for new autoinjector; device-formulation narrative"
2026-08-28,177Lu-edotreotide,,ITM,,"GEP-NET (radioligand therapy)",Yes,"Therapeutic radioligand",Private,EU,Unlisted,3,,,"Radioligand; company not US-listed (access may be indirect)"
2026-09-18,zidesamtinib,,Nuvalent,NUVL,"ROS1+ non-small cell lung cancer",Yes,"Small-molecule kinase inhibitor",Mid,US,Listed,5,"T-150 to T-90","T-20 to T-7","Targeted oncology with clean single-asset story; strong run-up candidate"
2026-10-10,tabelecleucel,Tab-cel,"Pierre Fabre / Atara license",ATRA,"EBV+ PTLD (post-transplant lymphoma)",Yes,"Allogeneic T-cell therapy",Small,"US/EU","Listed/Partnered",3,"T-120 to T-60","T-20 to T-10","BLA held by private partner; Atara still sentiment-linked"
`;

    let rows = [];

    function parseCSV(text) {
      const lines = text.trim().split(/\r?\n/);
      const dataLines = lines.slice(1);
      return dataLines.map(line => {
        const cells = [];
        let cur = "";
        let inQuotes = false;
        for (let i = 0; i < line.length; i++) {
          const c = line[i];
          if (c === '"') {
            inQuotes = !inQuotes;
          } else if (c === "," && !inQuotes) {
            cells.push(cur);
            cur = "";
          } else {
            cur += c;
          }
        }
        cells.push(cur);
        const obj = {};
        csvHeader.forEach((key, idx) => {
          obj[key] = (cells[idx] || "").trim().replace(/^"|"$/g, "");
        });
        return obj;
      });
    }

    function isTradeable(row) {
      const listed = (row.liquidity_flag || "").toLowerCase();
      const ticker = (row.ticker || "").trim();
      if (!ticker) return false;
      if (listed.includes("unlisted")) return false;
      return true;
    }

    function buildRationale(row) {
      const score = parseInt(row.runup_priority_score_1to5 || "0", 10);
      const orphan = (row.orphan_drug || "").toLowerCase() === "yes";
      const cap = (row.market_cap_bucket || "").toLowerCase();
      const therapy = (row.therapy_type || "").toLowerCase();
      const notes = (row.notes || "").toLowerCase();

      const bullets = [];

      if (orphan) bullets.push("Orphan/rare angle ‚Üí tends to attract catalyst flow.");
      if (cap.includes("small")) bullets.push("Smaller cap ‚Üí higher event beta / sharper run-ups.");
      else if (cap.includes("mid")) bullets.push("Mid-cap ‚Üí catalyst-sensitive but less explosive vs micro/small.");
      else if (cap.includes("large")) bullets.push("Large-cap dampener ‚Üí PDUFA impact often diluted.");

      if (therapy.includes("gene")) bullets.push("Gene therapy narrative ‚Üí binary-catalyst attention.");
      if (therapy.includes("cell")) bullets.push("Cell therapy ‚Üí catalyst-driven but higher execution uncertainty.");
      if (therapy.includes("diagnostic") || therapy.includes("imaging") || notes.includes("imaging"))
        bullets.push("Diagnostics/imaging ‚Üí often lower 'binary' volatility than therapeutics.");

      if (notes.includes("label expansion") || notes.includes("label refinement"))
        bullets.push("Label expansion/refinement ‚Üí less all-or-nothing feel than first approval.");
      if (notes.includes("partner") || notes.includes("licensed") || notes.includes("listed/partnered"))
        bullets.push("Partner/structure complexity ‚Üí can dampen a clean run-up trade.");

      if (score === 4) bullets.push("Score 4 = tradable catalyst with strong run-up potential (still higher risk).");
      if (score === 3) bullets.push("Score 3 = speculative/watch: investable but run-up is less reliable/dampened.");

      return bullets.slice(0, 4).join(" ");
    }

    function assignCluster(row) {
      const score = parseInt(row.runup_priority_score_1to5 || "0", 10);
      const tradeable = isTradeable(row);
      if (!tradeable) {
        return { key: "untradeable", label: "Untradeable / Indirect", tagClass: "tag-untradeable" };
      }
      if (score === 4) {
        return { key: "high-upside", label: "Higher-risk / High-upside (4)", tagClass: "tag-cluster-4" };
      }
      if (score === 3) {
        return { key: "speculative", label: "Speculative / Watch (3)", tagClass: "tag-cluster-3" };
      }
      return { key: "other", label: "Core / Other", tagClass: "" };
    }

    function avanzaLink(ticker) {
      const t = (ticker || "").trim().toUpperCase();
      if (!t) return "";
      // Best-effort: for non-US tickers or if Avanza mapping differs, user can still use TradingView link.
      if (t === "RCKT") return "https://www.avanza.se/aktier/om-aktien.html/814735/rocket-pharmaceuticals";
      // fallback: no guaranteed mapping
      return "";
    }

    function tradingViewLink(ticker) {
      const t = (ticker || "").trim().toUpperCase();
      if (!t) return "";
      // Best-effort: if it's US listed, TradingView often resolves "NASDAQ:XYZ" or "NYSE:XYZ".
      // We'll use a generic symbol search page to be safe.
      return `https://www.tradingview.com/symbols/${encodeURIComponent(t)}/`;
    }

    function copyRowSummary(row) {
      const score = row.runup_priority_score_1to5 || "";
      const cluster = row.risk_cluster || "";
      const text =
        `${row.pdufa_date} ‚Ä¢ ${row.company} (${row.ticker || "N/A"}) ‚Ä¢ ${row.drug} ‚Ä¢ ${row.indication} ‚Ä¢ ` +
        `Score ${score} ‚Ä¢ ${cluster} ‚Ä¢ Entry ${row.suggested_entry_window_days || "-"} ‚Ä¢ Exit ${row.suggested_exit_window_days || "-"} ‚Ä¢ ` +
        `Why: ${row.score_rationale || ""}`;
      navigator.clipboard?.writeText(text).catch(() => {});
    }

    function sortRows(arr, sortValue) {
      const [key, direction] = sortValue.split(":");
      const dir = direction === "desc" ? -1 : 1;
      return arr.sort((a, b) => {
        let va = a[key] || "";
        let vb = b[key] || "";

        if (key === "runup_priority_score_1to5") {
          va = parseInt(va || "0", 10);
          vb = parseInt(vb || "0", 10);
        }
        if (key === "pdufa_date") {
          va = new Date(va);
          vb = new Date(vb);
        }
        if (typeof va === "string") va = va.toLowerCase();
        if (typeof vb === "string") vb = vb.toLowerCase();

        if (va < vb) return -1 * dir;
        if (va > vb) return 1 * dir;
        return 0;
      });
    }

    function renderWatchlist() {
      const container = document.getElementById("watchlist");
      const search = document.getElementById("searchBox").value.toLowerCase();
      const minScore = parseInt(document.getElementById("scoreFilter").value, 10);
      const orphanFilter = document.getElementById("orphanFilter").value;
      const clusterFilter = document.getElementById("clusterFilter").value;
      const sortValue = document.getElementById("sortSelect").value;

      let filtered = rows.filter(r => {
        const text = (
          (r.company || "") + " " +
          (r.ticker || "") + " " +
          (r.indication || "") + " " +
          (r.drug || "") + " " +
          (r.notes || "")
        ).toLowerCase();

        if (search && !text.includes(search)) return false;

        const score = parseInt(r.runup_priority_score_1to5 || "0", 10);
        if (!isNaN(minScore) && score < minScore) return false;

        if (orphanFilter === "yes" && (r.orphan_drug || "").toLowerCase() !== "yes") return false;
        if (orphanFilter === "no" && (r.orphan_drug || "").toLowerCase() === "yes") return false;

        if (clusterFilter !== "any" && (r.risk_cluster_key || "") !== clusterFilter) return false;

        return true;
      });

      filtered = sortRows(filtered, sortValue);

      container.innerHTML = "";

      if (!filtered.length) {
        container.innerHTML = `<div class="empty-state">No results. Try widening filters or clearing the search.</div>`;
        return;
      }

      for (const r of filtered) {
        const score = parseInt(r.runup_priority_score_1to5 || "0", 10);
        let scoreTagClass = "tag-low";
        if (score >= 5) scoreTagClass = "tag-high";
        else if (score >= 4) scoreTagClass = "tag-medium";

        const orphanTag = (r.orphan_drug || "").toLowerCase() === "yes"
          ? `<span class="tag tag-orphan">Orphan</span>` : "";

        const clusterTag = r.risk_cluster_tag
          ? `<span class="tag ${r.risk_cluster_tag}">${r.risk_cluster}</span>`
          : `<span class="tag" style="border:1px solid rgba(148,163,184,0.35); background:rgba(15,23,42,0.6); color:#e5e7eb;">${r.risk_cluster}</span>`;

        const tv = tradingViewLink(r.ticker);
        const av = avanzaLink(r.ticker);

        const card = document.createElement("div");
        card.className = "row-card";
        card.title = "Click to copy a one-line summary to clipboard";

        card.addEventListener("click", () => copyRowSummary(r));

        card.innerHTML = `
          <div class="row-top">
            <div class="row-left">
              <div class="row-title">
                <span>${r.company}</span>
                <span class="ticker">${r.ticker || "N/A"}</span>
                <span class="tags">
                  ${orphanTag}
                  <span class="tag ${scoreTagClass}">Score ${score || ""}</span>
                  ${clusterTag}
                </span>
              </div>
              <div class="row-sub">
                <strong>${r.drug}</strong>
                ${r.brand_name ? ` ‚Ä¢ <span style="color:#cbd5e1;">${r.brand_name}</span>` : ""}
                ‚Ä¢ <span style="color:#e5e7eb;">${r.indication}</span>
              </div>
            </div>

            <div class="row-right">
              <div class="kv">
                <div class="k">PDUFA Date</div>
                <div class="v">${r.pdufa_date}</div>
              </div>
              <div class="kv">
                <div class="k">Entry</div>
                <div class="v">${r.suggested_entry_window_days || "-"}</div>
              </div>
              <div class="kv">
                <div class="k">Exit</div>
                <div class="v">${r.suggested_exit_window_days || "-"}</div>
              </div>
            </div>
          </div>

          <div class="row-bottom">
            <div class="rationale">
              <span style="color:var(--text-muted); font-weight:700;">Why this score:</span>
              ${r.score_rationale || ""}
              ${r.notes ? `<div style="margin-top:6px; color:var(--text-soft);"><span style="color:var(--text-muted); font-weight:700;">Notes:</span> ${r.notes}</div>` : ""}
            </div>

            <div class="links">
              ${tv ? `<a class="link-btn" href="${tv}" target="_blank" rel="noopener noreferrer">TradingView</a>` : ""}
              ${av ? `<a class="link-btn" href="${av}" target="_blank" rel="noopener noreferrer">Avanza</a>` : ""}
            </div>
          </div>
        `;

        container.appendChild(card);
      }
    }

    function setupFilters() {
      document.getElementById("searchBox").addEventListener("input", renderWatchlist);
      document.getElementById("scoreFilter").addEventListener("change", renderWatchlist);
      document.getElementById("orphanFilter").addEventListener("change", renderWatchlist);
      document.getElementById("clusterFilter").addEventListener("change", renderWatchlist);
      document.getElementById("sortSelect").addEventListener("change", renderWatchlist);
    }

    function initTradingViewWidgets() {
      if (typeof TradingView === "undefined") {
        console.error("TradingView library not loaded");
        return;
      }
      new TradingView.widget({
        container_id: "tradingview_rckt",
        symbol: "NASDAQ:RCKT",
        interval: "D",
        timezone: "Etc/UTC",
        theme: "dark",
        style: "1",
        locale: "en",
        hide_top_toolbar: false,
        hide_legend: false,
        height: 260,
        width: "100%"
      });
      new TradingView.widget({
        container_id: "tradingview_nuvl",
        symbol: "NASDAQ:NUVL",
        interval: "D",
        timezone: "Etc/UTC",
        theme: "dark",
        style: "1",
        locale: "en",
        hide_top_toolbar: false,
        hide_legend: false,
        height: 260,
        width: "100%"
      });
    }

    function updateRCKTDynamics() {
      const entryStart = new Date('2025-12-03');
      const entryEnd = new Date('2026-01-02');
      const exitStart = new Date('2026-02-24');
      const pdufaDate = new Date('2026-03-28');

      const now = new Date();
      const daysToEvent = Math.ceil((pdufaDate - now) / (1000 * 60 * 60 * 24));

      const countdownEl = document.getElementById('rckt-days');
      if (countdownEl) countdownEl.textContent = isFinite(daysToEvent) ? daysToEvent : "--";

      let phase = 'pre-entry';
      let phaseText = 'üü° Pre-Entry';

      if (now >= pdufaDate) {
        phase = 'post';
        phaseText = 'üî¥ Post-PDUFA';
      } else if (now >= exitStart) {
        phase = 'exit';
        phaseText = 'üü† EXIT WINDOW ACTIVE';
      } else if (now >= entryEnd) {
        phase = 'hold';
        phaseText = 'üîµ Hold Period';
      } else if (now >= entryStart) {
        phase = 'entry';
        phaseText = 'üü¢ ENTRY WINDOW ACTIVE';
      }

      const phaseEl = document.getElementById('rckt-phase');
      if (phaseEl) {
        phaseEl.className = `phase-indicator phase-${phase}`;
        const phaseTextEl = phaseEl.querySelector('.phase-text');
        if (phaseTextEl) phaseTextEl.textContent = phaseText;
      }

      const timelineStart = entryStart;
      const timelineEnd = pdufaDate;
      const totalDuration = timelineEnd - timelineStart;
      const elapsed = now - timelineStart;
      let position = (elapsed / totalDuration) * 100;
      position = Math.max(0, Math.min(100, position));

      const positionEl = document.getElementById('rckt-position');
      if (positionEl) positionEl.style.left = `${position}%`;
    }

    function init() {
      rows = parseCSV(inlineCSV).map(r => {
        const cluster = assignCluster(r);
        return {
          ...r,
          risk_cluster: cluster.label,
          risk_cluster_key: cluster.key,
          risk_cluster_tag: cluster.tagClass,
          score_rationale: buildRationale(r)
        };
      });

      setupFilters();
      renderWatchlist();
      updateRCKTDynamics();

      document.getElementById("scrollToCases").addEventListener("click", () => {
        document.getElementById("caseStudies")?.scrollIntoView({ behavior: "smooth", block: "start" });
      });

      setTimeout(initTradingViewWidgets, 600);
      setInterval(updateRCKTDynamics, 1000 * 60 * 60);
    }

    window.addEventListener("load", init);
  </script>
</body>
</html>









